# Travis auto-virtualenv isn't supported on OS X
#language: python
#python:
  #- "2.7"
  #- "3.3"
language: generic
matrix:
  include:
    - dist: precise
      python: 2.7
      language: python
      python: "2.7"
      os: linux
      env: PYTHON=/usr/bin/python2.7 CATKIN_VERSION=groovy-devel
    - dist: precise
      python: 3.4
      language: python
      python: "3.4"
      os: linux
      env: PYTHON=/usr/bin/python3.4 CATKIN_VERSION=groovy-devel
    - dist: trusty
      python: 2.7
      language: python
      python: "2.7"
      os: linux
      env: PYTHON=/usr/bin/python2.7 CATKIN_VERSION=indigo-devel
    - dist: trusty
      python: 3.4
      language: python
      python: "3.4"
      os: linux
      env: PYTHON=/usr/bin/python3.4 CATKIN_VERSION=indigo-devel
    - os: osx
      python: 2
      env: PYTHON=/usr/bin/python CATKIN_VERSION=indigo-devel
    - os: osx
      python: 3
      env: PYTHON=/usr/local/bin/python3 CATKIN_VERSION=indigo-devel
    - os: osx
      osx_image: xcode7.1
      python: 2
      env: PYTHON=/usr/local/bin/python CATKIN_VERSION=indigo-devel
    - os: osx
      osx_image: xcode7.1
      python: 3
      env: PYTHON=/usr/local/bin/python3 CATKIN_VERSION=indigo-devel
    - os: osx
      osx_image: xcode7.3
      python: 2
      env: PYTHON=/usr/local/bin/python CATKIN_VERSION=indigo-devel
    - os: osx
      osx_image: xcode7.3
      python: 3
      env: PYTHON=/usr/local/bin/python3 CATKIN_VERSION=indigo-devel
before_install:
  - source .travis.before_install.bash
  - pip install --upgrade pip
  - pip install setuptools argparse catkin-pkg distribute PyYAML psutil trollius osrf_pycommon pyenchant sphinxcontrib-spelling
install:
  - pip install setuptools argparse catkin-pkg distribute PyYAML psutil
  - pip install nose coverage flake8 mock trollius --upgrade
before_script:
  - ./.travis.before_script.bash
  - pip install git+https://github.com/osrf/osrf_pycommon.git
  - pip install empy --upgrade
  - git clone https://github.com/ros/catkin.git /tmp/catkin_source -b $CATKIN_VERSION --depth 1
  - mkdir /tmp/catkin_source/build
  - pushd /tmp/catkin_source/build
  - cmake .. && make
  - source devel/setup.bash
  - popd
script:
  - python setup.py develop
  - python setup.py nosetests -s
  # Build documentation
  - pushd docs
  #- make html
  #- ./check_spelling.bash
  - popd
notifications:
  email: false
